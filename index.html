<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loker Kesehatan ID</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <style>
    :root {
        --primary: #0088cc;
        --secondary: #3d5a80;
        --accent: #f27b09;
        --green: #127720;
        --brown: #473933;
        --light-bg: #e0fbfc;
        --light-text: #293241;
        --white: #fff;
    }

    body.dark {
        --light-bg: #121212;
        --light-text: #e0e0e0;
        --white: #1e1e1e;
    }

    html, body {
        width: 100%;
        overflow-x: hidden;
    }

    body {
        font-family: "Poppins", sans-serif;
        margin: 0;
        background: var(--light-bg);
        color: var(--light-text);
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        transition: background 0.3s, color 0.3s;
    }

    .container {
        width: min(100%, 1100px);
        margin-inline: auto;
        padding-inline: clamp(12px, 4vw, 32px);
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    header {
        width: 100%;
        text-align: center;
        background: var(--light-bg)
            url("https://elementor.merchant.id/wp-content/uploads/1886/2024/06/OrnamentBG_01.png")
            no-repeat top right;
        padding-block: clamp(20px, 6vw, 40px);
    }

    header .container {
        align-items: center;
        justify-content: center;
    }

    header img {
        width: clamp(80px, 20vw, 100px);
        height: auto;
        border-radius: 15px;
        box-shadow: 5px 5px 0 var(--accent);
    }

    header h1 {
        color: var(--secondary);
        font-size: clamp(1.4rem, 2.8vw, 1.8rem);
        font-weight: 800;
        margin: 15px 0 5px;
    }

    header p {
        font-family: Lato, sans-serif;
        font-size: clamp(0.9rem, 1.8vw, 1.2rem);
        margin: 0;
    }

    .links-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100%;
        padding-block: clamp(20px, 5vw, 40px);
        text-align: center;
    }

    .btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        width: 100%;
        max-width: 450px;
        margin: 10px auto;
        padding: clamp(10px, 2vw, 14px);
        border-radius: 8px;
        font-size: clamp(0.85rem, 1.8vw, 1rem);
        font-weight: 500;
        text-decoration: none;
        transition: transform 0.2s, background 0.2s;
    }

    .btn:hover {
        transform: scale(1.05);
    }

    /* warna tombol */
    .btn-telegram { background: #0088cc; color: #fff; }
    .btn-orange { background: #f27b09; color: #fff; }
    .btn-blue { background: #1d559d; color: #fff; }
    .btn-white { background: #fff; color: #3d5a80; border: 1px solid #ddd; }
    .btn-green { background: #127720; color: #fff; }
    .btn-brown { background: #473933; color: #fff; }

    .socials {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        flex-wrap: wrap;
        width: 100%;
        padding-block: clamp(20px, 5vw, 40px);
        text-align: center;
    }

    .socials a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: clamp(35px, 5vw, 45px);
        height: clamp(35px, 5vw, 45px);
        font-size: clamp(16px, 2vw, 22px);
        border-radius: 50%;
        background: #fff;
        color: #3d5a80;
        transition: transform 0.2s, background 0.2s;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
    }

    .socials a:hover {
        transform: scale(1.15);
        background: #f0f0f0;
    }

    footer {
        width: 100%;
        text-align: center;
        font-size: clamp(0.75rem, 1.5vw, 0.9rem);
        color: var(--light-text);
        padding-block: clamp(20px, 5vw, 40px);
    }

    footer .container {
        align-items: center;
        justify-content: center;
    }

    footer a {
        color: blue;
        text-decoration: none;
    }

    .dark-toggle {
        position: fixed;
        top: 15px;
        right: 15px;
        background: var(--white);
        color: var(--secondary);
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        transition: background 0.3s, transform 0.2s;
        z-index: 1000;
    }

    .dark-toggle:hover { 
        transform: scale(1.1); 
    }

    @media (max-width: 768px) {
        .links-container {
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .btn {
            width: 95%;
            max-width: none;
            margin: 8px auto;
        }
    }
    </style>
</head>
<body>
    <div class="container">
        <button class="dark-toggle" id="darkToggle"><i class="fas fa-moon"></i></button>
        <header>
            <img src="https://elementor.merchant.id/wp-content/uploads/1886/2025/02/Lokerkesehatanid-400px_ee0kys.png" alt="Logo Loker Kesehatan ID" />
            <h1>Loker Kesehatan ID</h1>
            <p>Keep in touch with us</p>
        </header>

        <div id="linksContainer">Sedang memuat data...</div>

        <div class="socials">
            <a href="https://www.facebook.com/lokerkesehatanid"><i class="fab fa-facebook-f"></i></a>
            <a href="https://twitter.com/loker_kesehatan"><i class="fab fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCgb-1Y2Uy8W2QwyoqpxhiFw?sub_confirmation=1"><i class="fab fa-youtube"></i></a>
            <a href="https://www.instagram.com/lokerkesehatanid"><i class="fab fa-instagram"></i></a>
        </div>

        <footer>
            <a href="">Loker Kesehatan ID</a> Â© 2018 - <span id="year"></span>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" defer></script>
    <script>
        document.getElementById("year").textContent = new Date().getFullYear();

        // Dark Mode
        const toggleBtn = document.getElementById("darkToggle");
        const body = document.body;
        if (localStorage.getItem("darkMode") === "true") {
            body.classList.add("dark");
            toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
        }
        toggleBtn.addEventListener("click", () => {
            body.classList.toggle("dark");
            const isDark = body.classList.contains("dark");
            localStorage.setItem("darkMode", isDark);
            toggleBtn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        // === Ambil data dari Apps Script via AJAX GET ===
        const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyqJ4u8maNKM97iqKl511Q9K8pY5_SnJQajA6Gtt7I6-RrZfq2ZT79zbmYsmYT8Sq28/exec"; // ganti dengan URL Web App kamu

        fetch(WEB_APP_URL)
        .then(response => response.json())
        .then(data => renderLinks(data))
        .catch(err => {
            document.getElementById("linksContainer").textContent = "Gagal memuat data.";
            console.error("Error:", err);
        });

        function renderLinks(links) {
            const container = document.getElementById("linksContainer");
            container.innerHTML = "";
            links.forEach(link => {
                const a = document.createElement("a");
                a.href = link.url;
                a.className = `btn ${link.color}`;
                a.innerHTML = `<i class="${link.icon}"></i> ${link.label}`;
                a.target = "_blank";
                container.appendChild(a);
            });
        }

        // Daftar link sponsor (putar/acak)
        const sponsorUrls = [
            "https://s.shopee.co.id/6AcTEtdjIz",
            "https://s.shopee.co.id/40Xyf11I5q",
            "https://s.shopee.co.id/AKS2ChKiHa",
            "https://s.shopee.co.id/5pzcqLYhyV",
            "https://s.shopee.co.id/30fRTFltLp"
        ];

        const cooldown = 10000; // jeda 10 detik

        function getRandomSponsor() {
            const index = Math.floor(Math.random() * sponsorUrls.length);
            return sponsorUrls[index];
        }

        function tryOpenSponsor() {
            const last = Number(localStorage.getItem("directlink-last-time") || 0);
            const now = Date.now();
            if (!last || (now - last) > cooldown) {
                localStorage.setItem("directlink-last-time", now);
                const sponsorUrl = getRandomSponsor();
                window.open(sponsorUrl, "_blank");
            }
        }

        // Jalankan saat user klik pertama kali di halaman
        document.addEventListener("click", () => {
            tryOpenSponsor();
        }, { once: true });

        // === Tambahkan sponsor saat user klik link di #linksContainer
        document.getElementById("linksContainer").addEventListener("click", (e) => {
            const target = e.target.closest("a");
            if (target) {
                tryOpenSponsor();
            }
        });
    </script>
</body>
</html>
